---
- name: configure conf.d
  template:
    src: conf.d/{{ item }}.conf
    dest: /etc/nginx/conf.d/{{ item }}.conf
    owner: root
    group: root
    mode: 0644
  with_items:
    - default
  notify: reload nginx

- name: configure default.d
  template:
    src: default.d/{{ item }}.conf
    dest: /etc/nginx/default.d/{{ item }}.conf
    owner: root
    group: root
    mode: 0644
  with_items:
    - nginx-status
    - proxy
    - secure
    - settings
  notify: reload nginx

- name: configure available.d
  template:
    src: available.d/{{ item }}.conf
    dest: /etc/nginx/available.d/{{ item }}.conf
    owner: root
    group: root
    mode: 0644
  with_items:
    - basicauth
    - php-status
  notify: reload nginx
